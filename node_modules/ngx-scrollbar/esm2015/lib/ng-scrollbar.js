/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input, Output, ViewChild, ContentChild, NgZone, ElementRef, EventEmitter, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';
import { Directionality } from '@angular/cdk/bidi';
import { fromEvent, Observable, Subject } from 'rxjs';
import { auditTime, filter, map, pairwise, pluck, takeUntil, tap } from 'rxjs/operators';
import { ScrollViewport } from './scroll-viewport';
import { SmoothScrollManager } from 'ngx-scrollbar/smooth-scroll';
import { ScrollbarManager } from './utils/scrollbar-manager';
import { NativeScrollbarSizeFactory } from './utils/native-scrollbar-size-factory';
export class NgScrollbar {
    /**
     * @param {?} el
     * @param {?} zone
     * @param {?} changeDetectorRef
     * @param {?} dir
     * @param {?} smoothScroll
     * @param {?} manager
     * @param {?} nativeScrollbarSizeFactory
     */
    constructor(el, zone, changeDetectorRef, dir, smoothScroll, manager, nativeScrollbarSizeFactory) {
        this.el = el;
        this.zone = zone;
        this.changeDetectorRef = changeDetectorRef;
        this.dir = dir;
        this.smoothScroll = smoothScroll;
        this.manager = manager;
        this.nativeScrollbarSizeFactory = nativeScrollbarSizeFactory;
        /**
         * A class forwarded to scrollable viewport element
         */
        this.viewClass = this.manager.globalOptions.viewClass;
        /**
         * A class forwarded to the scrollbar track element
         */
        this.trackClass = this.manager.globalOptions.trackClass;
        /**
         * A class forwarded to the scrollbar thumb element
         */
        this.thumbClass = this.manager.globalOptions.thumbClass;
        /**
         * Minimum scrollbar thumb size
         */
        this.minThumbSize = this.manager.globalOptions.minThumbSize;
        /**
         * The duration which the scrolling takes to reach its target when scrollbar rail is clicked
         */
        this.trackClickScrollDuration = this.manager.globalOptions.trackClickScrollDuration;
        /**
         * A flag used to enable/disable the scrollbar thumb dragged event
         */
        this.pointerEventsDisabled = this.manager.globalOptions.pointerEventsDisabled;
        /**
         * Sets the pointer events method
         * Use viewport pointer events  to handle dragging and track click (This makes scrolling work when mouse is over the scrollbar)
         * Use scrollbar pointer events to handle dragging and track click
         */
        this.pointerEventsMethod = this.manager.globalOptions.pointerEventsMethod;
        /**
         * Disable custom scrollbar and switch back to native scrollbar
         */
        this.disabled = false;
        /**
         * Sets the supported scroll track of the viewport, there are 3 options:
         *
         * - `vertical` Use both vertical and horizontal scrollbar
         * - `horizontal` Use both vertical and horizontal scrollbar
         * - `all` Use both vertical and horizontal scrollbar
         */
        this.track = this.manager.globalOptions.track;
        /**
         * When to show the scrollbar, and there are 3 options:
         *
         * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar
         * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering
         * - `always` Scrollbars are always shown even if the viewport is not scrollable
         */
        this.visibility = this.manager.globalOptions.visibility;
        /**
         *  Sets the appearance of the scrollbar, there are 2 options:
         *
         * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.
         * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.
         */
        this.appearance = this.manager.globalOptions.appearance;
        /**
         * Sets the position of each scrollbar, there are 4 options:
         *
         * - `native` (Default) Use the default position like in native scrollbar.
         * - `invertY` Inverts vertical scrollbar position
         * - `invertX` Inverts Horizontal scrollbar position
         * - `invertAll` Inverts both scrollbar positions
         */
        this.position = this.manager.globalOptions.position;
        /**
         * Debounce interval for detecting changes via ResizeObserver
         */
        this.sensorDebounce = this.manager.globalOptions.sensorDebounce;
        /**
         * Whether ResizeObserver is disabled
         */
        this.sensorDisabled = this.manager.globalOptions.sensorDisabled;
        /**
         * Scroll Audit Time
         */
        this.scrollAuditTime = this.manager.globalOptions.scrollAuditTime;
        /**
         * Steam that emits when scrollbar is updated
         */
        this.updated = new EventEmitter();
        /**
         * Set of attributes added on the scrollbar wrapper
         */
        this.state = {};
        /**
         * Stream that destroys components' observables
         */
        this.destroyed = new Subject();
    }
    /**
     * @return {?}
     */
    get nativeElement() {
        return this.el.nativeElement;
    }
    /**
     * Update local state with each change detection
     * @private
     * @return {?}
     */
    updateState() {
        /** @type {?} */
        let verticalUsed = false;
        /** @type {?} */
        let horizontalUsed = false;
        /** @type {?} */
        let isVerticallyScrollable = false;
        /** @type {?} */
        let isHorizontallyScrollable = false;
        // Check if vertical scrollbar should be displayed
        if (this.track === 'all' || this.track === 'vertical') {
            isVerticallyScrollable = this.viewport.scrollHeight > this.viewport.clientHeight;
            verticalUsed = this.visibility === 'always' || isVerticallyScrollable;
        }
        // Check if horizontal scrollbar should be displayed
        if (this.track === 'all' || this.track === 'horizontal') {
            isHorizontallyScrollable = this.viewport.scrollWidth > this.viewport.clientWidth;
            horizontalUsed = this.visibility === 'always' || isHorizontallyScrollable;
        }
        // Update inner wrapper attributes
        this._updateState({
            position: this.position,
            track: this.track,
            appearance: this.appearance,
            visibility: this.visibility,
            deactivated: this.disabled,
            dir: this.dir.value,
            pointerEventsMethod: this.pointerEventsMethod,
            verticalUsed,
            horizontalUsed,
            isVerticallyScrollable,
            isHorizontallyScrollable
        });
    }
    /**
     * @private
     * @param {?} state
     * @return {?}
     */
    _updateState(state) {
        this.state = Object.assign({}, this.state, state);
        this.changeDetectorRef.detectChanges();
    }
    /**
     * @private
     * @param {?} property
     * @return {?}
     */
    getScrolledByDirection(property) {
        /** @type {?} */
        let event;
        return this.scrolled.pipe(tap((/**
         * @param {?} e
         * @return {?}
         */
        (e) => event = e)), pluck('target', property), pairwise(), filter((/**
         * @param {?} __0
         * @return {?}
         */
        ([prev, curr]) => prev !== curr)), map((/**
         * @return {?}
         */
        () => event)));
    }
    /**
     * Set hovered state if a scrollbar is being hovered
     * @param {?} hovered
     * @return {?}
     */
    setHovered(hovered) {
        this.zone.run((/**
         * @return {?}
         */
        () => this._updateState(Object.assign({}, hovered))));
    }
    /**
     * Set dragging state if a scrollbar is being dragged
     * @param {?} dragging
     * @return {?}
     */
    setDragging(dragging) {
        this.zone.run((/**
         * @return {?}
         */
        () => this._updateState(Object.assign({}, dragging))));
    }
    /**
     * Set clicked state if a scrollbar track is being click
     * @param {?} scrollbarClicked
     * @return {?}
     */
    setClicked(scrollbarClicked) {
        this.zone.run((/**
         * @return {?}
         */
        () => this._updateState({ scrollbarClicked })));
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        // Set the viewport based on user choice
        this.zone.runOutsideAngular((/**
         * @return {?}
         */
        () => {
            if (this.customViewPort) {
                this.viewport = this.customViewPort;
                this.defaultViewPort.setAsWrapper();
            }
            else {
                this.viewport = this.defaultViewPort;
            }
            // Activate the selected viewport
            this.viewport.setAsViewport((/** @type {?} */ (this.viewClass)));
            /** @type {?} */
            let scrollStream = fromEvent(this.viewport.nativeElement, 'scroll', { passive: true });
            // Throttle scroll event if 'scrollAuditTime' is set
            scrollStream = this.scrollAuditTime ? scrollStream.pipe(auditTime(this.scrollAuditTime)) : scrollStream;
            // Initialize scroll streams
            this.scrolled = new Observable((/**
             * @param {?} observer
             * @return {?}
             */
            (observer) => scrollStream.pipe(takeUntil(this.destroyed)).subscribe(observer)));
            this.verticalScrolled = this.getScrolledByDirection('scrollTop');
            this.horizontalScrolled = this.getScrolledByDirection('scrollLeft');
        }));
    }
    /**
     * @return {?}
     */
    ngAfterViewChecked() {
        this.updateState();
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.destroyed.next();
        this.destroyed.complete();
    }
    /**
     * Update local state and the internal scrollbar controls
     * @return {?}
     */
    update() {
        if (!this.state.horizontalUsed) {
            // Auto-height: Set component height to content height
            this.nativeElement.style.height = `${this.viewport.contentHeight}px`;
        }
        this.updated.next();
        this.changeDetectorRef.detectChanges();
    }
    /**
     * Smooth scroll functions
     * @param {?} options
     * @return {?}
     */
    scrollTo(options) {
        return this.smoothScroll.scrollTo(this.viewport.nativeElement, options);
    }
    /**
     * Scroll to element by reference or selector
     * @param {?} target
     * @param {?=} options
     * @return {?}
     */
    scrollToElement(target, options) {
        return this.smoothScroll.scrollToElement(this.viewport.nativeElement, target, options);
    }
}
NgScrollbar.decorators = [
    { type: Component, args: [{
                selector: 'ng-scrollbar',
                exportAs: 'ngScrollbar',
                template: "<div class=\"ng-scrollbar-wrapper\" [ngAttr]=\"state\">\r\n  <div class=\"ng-scroll-viewport-wrapper\"\r\n       (resizeSensor)=\"update()\"\r\n       [sensorDebounce]=\"sensorDebounce\"\r\n       [sensorDisabled]=\"sensorDisabled\">\r\n    <div scrollViewport\r\n         [style]=\"nativeScrollbarSizeFactory.nativeScrollbarSize | async | cssVariable: 'native-scrollbar-size'\">\r\n      <div>\r\n        <ng-content></ng-content>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <ng-container *ngIf=\"!disabled\">\r\n    <scrollbar-x *ngIf=\"state.horizontalUsed\"\r\n                 [attr.scrollable]=\"state.isHorizontallyScrollable\"\r\n                 [attr.fit]=\"state.verticalUsed\">\r\n    </scrollbar-x>\r\n    <scrollbar-y *ngIf=\"state.verticalUsed\"\r\n                 [attr.scrollable]=\"state.isVerticallyScrollable\"\r\n                 [attr.fit]=\"state.horizontalUsed\">\r\n    </scrollbar-y>\r\n  </ng-container>\r\n</div>\r\n\r\n",
                changeDetection: ChangeDetectionStrategy.OnPush,
                host: { '[class.ng-scrollbar]': 'true' },
                styles: ["::ng-deep .ng-scrollbar-measure{left:0;overflow:scroll;position:fixed;top:-9999px}:host{--scrollbar-border-radius:7px;--scrollbar-padding:4px;--scrollbar-track-color:transparent;--scrollbar-thumb-color:rgba(0, 0, 0, 0.2);--scrollbar-thumb-hover-color:var(--scrollbar-thumb-color);--scrollbar-size:5px;--scrollbar-hover-size:var(--scrollbar-size);--scrollbar-thumb-transition:height ease-out 150ms,width ease-out 150ms;--scrollbar-track-transition:height ease-out 150ms,width ease-out 150ms;display:block;position:relative;height:100%;max-height:100%;max-width:100%}:host>.ng-scrollbar-wrapper{--scrollbar-total-size:calc(var(--scrollbar-size) + var(--scrollbar-padding) * 2);--vertical-scrollbar-size:var(--scrollbar-size);--horizontal-scrollbar-size:var(--scrollbar-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2)}:host>.ng-scrollbar-wrapper[verticalDragging=true],:host>.ng-scrollbar-wrapper[verticalHovered=true]{--vertical-scrollbar-size:var(--scrollbar-hover-size);--vertical-scrollbar-total-size:calc(var(--vertical-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[horizontalDragging=true],:host>.ng-scrollbar-wrapper[horizontalHovered=true]{--horizontal-scrollbar-size:var(--scrollbar-hover-size);--horizontal-scrollbar-total-size:calc(var(--horizontal-scrollbar-size) + var(--scrollbar-padding) * 2);cursor:default}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:var(--scrollbar-total-size);right:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=ltr][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-left:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{left:0;right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertAll][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][verticalUsed=true][position=invertY][dir=rtl][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-right:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:0;bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-bottom:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=scrollbar]>.ng-scroll-viewport-wrapper{top:var(--scrollbar-total-size);bottom:0}:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertAll][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[deactivated=false][appearance=standard][horizontalUsed=true][position=invertX][pointerEventsMethod=viewport]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{padding-top:var(--scrollbar-total-size)}:host>.ng-scrollbar-wrapper[deactivated=false][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{bottom:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{left:0;right:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][verticalUsed=true][dir=rtl]>.ng-scroll-viewport-wrapper>.ng-native-scrollbar-hider{right:0;left:var(--native-scrollbar-size)}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]>.scrollbar-control{opacity:0;transition-property:opacity;transition-duration:.4s;transition-delay:.8s}:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:active>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:focus>.scrollbar-control,:host>.ng-scrollbar-wrapper[deactivated=false][visibility=hover]:hover>.scrollbar-control{opacity:1;transition-duration:.4s;transition-delay:0s}:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-x:auto;overflow-y:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow-y:auto;overflow-x:hidden}:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,:host>.ng-scrollbar-wrapper[verticalUsed=true][horizontalUsed=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{overflow:auto}.ng-scroll-viewport-wrapper{overflow:hidden}.ng-scroll-viewport{-webkit-overflow-scrolling:touch;contain:strict;will-change:scroll-position}::ng-deep .ng-scroll-content{position:relative!important;display:inline-block;min-width:100%}.ng-scroll-layer,.ng-scroll-viewport-wrapper,.ng-scrollbar-wrapper,::ng-deep .ng-scroll-viewport{position:absolute;left:0;right:0;top:0;bottom:0}", "::ng-deep .ng-scrollbar-wrapper[pointerEventsMethod=viewport]>.scrollbar-control{pointer-events:none}::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[horizontalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[scrollbarClicked=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>*>*>::ng-deep.ng-scroll-viewport,::ng-deep .ng-scrollbar-wrapper[verticalDragging=true]>.ng-scroll-viewport-wrapper>.ng-scroll-viewport{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control{position:absolute;display:flex;justify-content:center;align-items:center;transition:var(--scrollbar-track-transition)}::ng-deep .ng-scrollbar-wrapper>.scrollbar-control[scrollable=false] .ng-scrollbar-thumb{display:none}::ng-deep .ng-scrollbar-track{height:100%;width:100%;z-index:1;border-radius:var(--scrollbar-border-radius);background-color:var(--scrollbar-track-color);overflow:hidden;transition:var(--scrollbar-track-transition);cursor:default}::ng-deep .ng-scrollbar-thumb{box-sizing:border-box;position:relative;border-radius:inherit;background-color:var(--scrollbar-thumb-color);transform:translateZ(0);transition:var(--scrollbar-thumb-transition)}"]
            }] }
];
/** @nocollapse */
NgScrollbar.ctorParameters = () => [
    { type: ElementRef },
    { type: NgZone },
    { type: ChangeDetectorRef },
    { type: Directionality },
    { type: SmoothScrollManager },
    { type: ScrollbarManager },
    { type: NativeScrollbarSizeFactory }
];
NgScrollbar.propDecorators = {
    viewClass: [{ type: Input }],
    trackClass: [{ type: Input }],
    thumbClass: [{ type: Input }],
    minThumbSize: [{ type: Input }],
    trackClickScrollDuration: [{ type: Input }],
    pointerEventsDisabled: [{ type: Input }],
    pointerEventsMethod: [{ type: Input }],
    disabled: [{ type: Input }],
    track: [{ type: Input }],
    visibility: [{ type: Input }],
    appearance: [{ type: Input }],
    position: [{ type: Input }],
    sensorDebounce: [{ type: Input }],
    sensorDisabled: [{ type: Input }],
    scrollAuditTime: [{ type: Input }],
    updated: [{ type: Output }],
    defaultViewPort: [{ type: ViewChild, args: [ScrollViewport, { static: true },] }],
    customViewPort: [{ type: ContentChild, args: [ScrollViewport, { static: true },] }]
};
if (false) {
    /**
     * A class forwarded to scrollable viewport element
     * @type {?}
     */
    NgScrollbar.prototype.viewClass;
    /**
     * A class forwarded to the scrollbar track element
     * @type {?}
     */
    NgScrollbar.prototype.trackClass;
    /**
     * A class forwarded to the scrollbar thumb element
     * @type {?}
     */
    NgScrollbar.prototype.thumbClass;
    /**
     * Minimum scrollbar thumb size
     * @type {?}
     */
    NgScrollbar.prototype.minThumbSize;
    /**
     * The duration which the scrolling takes to reach its target when scrollbar rail is clicked
     * @type {?}
     */
    NgScrollbar.prototype.trackClickScrollDuration;
    /**
     * A flag used to enable/disable the scrollbar thumb dragged event
     * @type {?}
     */
    NgScrollbar.prototype.pointerEventsDisabled;
    /**
     * Sets the pointer events method
     * Use viewport pointer events  to handle dragging and track click (This makes scrolling work when mouse is over the scrollbar)
     * Use scrollbar pointer events to handle dragging and track click
     * @type {?}
     */
    NgScrollbar.prototype.pointerEventsMethod;
    /**
     * Disable custom scrollbar and switch back to native scrollbar
     * @type {?}
     */
    NgScrollbar.prototype.disabled;
    /**
     * Sets the supported scroll track of the viewport, there are 3 options:
     *
     * - `vertical` Use both vertical and horizontal scrollbar
     * - `horizontal` Use both vertical and horizontal scrollbar
     * - `all` Use both vertical and horizontal scrollbar
     * @type {?}
     */
    NgScrollbar.prototype.track;
    /**
     * When to show the scrollbar, and there are 3 options:
     *
     * - `native` (default) Scrollbar will be visible when viewport is scrollable like with native scrollbar
     * - `hover` Scrollbars are hidden by default, only visible on scrolling or hovering
     * - `always` Scrollbars are always shown even if the viewport is not scrollable
     * @type {?}
     */
    NgScrollbar.prototype.visibility;
    /**
     *  Sets the appearance of the scrollbar, there are 2 options:
     *
     * - `standard` (default) scrollbar space will be reserved just like with native scrollbar.
     * - `compact` scrollbar doesn't reserve any space, they are placed over the viewport.
     * @type {?}
     */
    NgScrollbar.prototype.appearance;
    /**
     * Sets the position of each scrollbar, there are 4 options:
     *
     * - `native` (Default) Use the default position like in native scrollbar.
     * - `invertY` Inverts vertical scrollbar position
     * - `invertX` Inverts Horizontal scrollbar position
     * - `invertAll` Inverts both scrollbar positions
     * @type {?}
     */
    NgScrollbar.prototype.position;
    /**
     * Debounce interval for detecting changes via ResizeObserver
     * @type {?}
     */
    NgScrollbar.prototype.sensorDebounce;
    /**
     * Whether ResizeObserver is disabled
     * @type {?}
     */
    NgScrollbar.prototype.sensorDisabled;
    /**
     * Scroll Audit Time
     * @type {?}
     */
    NgScrollbar.prototype.scrollAuditTime;
    /**
     * Steam that emits when scrollbar is updated
     * @type {?}
     */
    NgScrollbar.prototype.updated;
    /**
     * Default viewport reference
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.defaultViewPort;
    /**
     * Custom viewport reference
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.customViewPort;
    /**
     * Viewport Element
     * @type {?}
     */
    NgScrollbar.prototype.viewport;
    /**
     * Set of attributes added on the scrollbar wrapper
     * @type {?}
     */
    NgScrollbar.prototype.state;
    /**
     * Stream that destroys components' observables
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.destroyed;
    /**
     * Stream that emits on scroll event
     * @type {?}
     */
    NgScrollbar.prototype.scrolled;
    /**
     * Steam that emits scroll event for vertical scrollbar
     * @type {?}
     */
    NgScrollbar.prototype.verticalScrolled;
    /**
     * Steam that emits scroll event for horizontal scrollbar
     * @type {?}
     */
    NgScrollbar.prototype.horizontalScrolled;
    /**
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.el;
    /**
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.zone;
    /**
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.changeDetectorRef;
    /**
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.dir;
    /**
     * @type {?}
     * @private
     */
    NgScrollbar.prototype.smoothScroll;
    /** @type {?} */
    NgScrollbar.prototype.manager;
    /** @type {?} */
    NgScrollbar.prototype.nativeScrollbarSizeFactory;
}
/**
 * @record
 */
function ScrollbarDragging() { }
if (false) {
    /** @type {?|undefined} */
    ScrollbarDragging.prototype.verticalDragging;
    /** @type {?|undefined} */
    ScrollbarDragging.prototype.horizontalDragging;
}
/**
 * @record
 */
function ScrollbarHovered() { }
if (false) {
    /** @type {?|undefined} */
    ScrollbarHovered.prototype.verticalHovered;
    /** @type {?|undefined} */
    ScrollbarHovered.prototype.horizontalHovered;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctc2Nyb2xsYmFyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmd4LXNjcm9sbGJhci8iLCJzb3VyY2VzIjpbImxpYi9uZy1zY3JvbGxiYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixTQUFTLEVBQ1QsWUFBWSxFQUlaLE1BQU0sRUFDTixVQUFVLEVBQ1YsWUFBWSxFQUNaLGlCQUFpQixFQUNqQix1QkFBdUIsRUFDeEIsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFZLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNoRSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDekYsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBdUIsbUJBQW1CLEVBQXlCLE1BQU0sNkJBQTZCLENBQUM7QUFXOUcsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDN0QsT0FBTyxFQUFFLDBCQUEwQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFVbkYsTUFBTSxPQUFPLFdBQVc7Ozs7Ozs7Ozs7SUFtRnRCLFlBQ1UsRUFBYyxFQUNkLElBQVksRUFDWixpQkFBb0MsRUFDcEMsR0FBbUIsRUFDbkIsWUFBaUMsRUFDbEMsT0FBeUIsRUFDekIsMEJBQXNEO1FBTnJELE9BQUUsR0FBRixFQUFFLENBQVk7UUFDZCxTQUFJLEdBQUosSUFBSSxDQUFRO1FBQ1osc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtRQUNwQyxRQUFHLEdBQUgsR0FBRyxDQUFnQjtRQUNuQixpQkFBWSxHQUFa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QUF1Rjs7Ozs7SUFFdkYsK0JBQXlCOzs7OztJQUV6Qiw0QkFBNkI7Ozs7OztJQUU3QixnQ0FBd0M7Ozs7O0lBR3hDLCtCQUEwQjs7Ozs7SUFFMUIsdUNBQWtDOzs7OztJQUVsQyx5Q0FBb0M7Ozs7O0lBT2xDLHlCQUFzQjs7Ozs7SUFDdEIsMkJBQW9COzs7OztJQUNwQix3Q0FBNEM7Ozs7O0lBQzVDLDBCQUEyQjs7Ozs7SUFDM0IsbUNBQXlDOztJQUN6Qyw4QkFBZ0M7O0lBQ2hDLGlEQUE2RDs7Ozs7QUF3SWpFLGdDQUdDOzs7SUFGQyw2Q0FBMkI7O0lBQzNCLCtDQUE2Qjs7Ozs7QUFHL0IsK0JBR0M7OztJQUZDLDJDQUEwQjs7SUFDMUIsNkNBQTRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDb21wb25lbnQsXHJcbiAgSW5wdXQsXHJcbiAgT3V0cHV0LFxyXG4gIFZpZXdDaGlsZCxcclxuICBDb250ZW50Q2hpbGQsXHJcbiAgT25Jbml0LFxyXG4gIEFmdGVyVmlld0NoZWNrZWQsXHJcbiAgT25EZXN0cm95LFxyXG4gIE5nWm9uZSxcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneVxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQgeyBEaXJlY3Rpb25hbGl0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9iaWRpJztcclxuaW1wb3J0IHsgZnJvbUV2ZW50LCBPYnNlcnZhYmxlLCBPYnNlcnZlciwgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xyXG5pbXBvcnQgeyBhdWRpdFRpbWUsIGZpbHRlciwgbWFwLCBwYWlyd2lzZSwgcGx1Y2ssIHRha2VVbnRpbCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBTY3JvbGxWaWV3cG9ydCB9IGZyb20gJy4vc2Nyb2xsLXZpZXdwb3J0JztcclxuaW1wb3J0IHsgU21vb3RoU2Nyb2xsRWxlbWVudCwgU21vb3RoU2Nyb2xsTWFuYWdlciwgU21vb3RoU2Nyb2xsVG9PcHRpb25zIH0gZnJvbSAnbmd4LXNjcm9sbGJhci9zbW9vdGgtc2Nyb2xsJztcclxuLy8gVW5jb21tZW50IHRoZSBmb2xsb3dpbmcgbGluZSBpbiBkZXZlbG9wbWVudCBtb2RlXHJcbi8vaW1wb3J0IHsgU21vb3RoU2Nyb2xsRWxlbWVudCwgU21vb3RoU2Nyb2xsTWFuYWdlciwgU21vb3RoU2Nyb2xsVG9PcHRpb25zIH0gZnJvbSAnLi4vLi4vc21vb3RoLXNjcm9sbC9zcmMvcHVibGljX2FwaSc7XHJcbmltcG9ydCB7XHJcbiAgU2Nyb2xsYmFyQXBwZWFyYW5jZSxcclxuICBTY3JvbGxiYXJUcmFjayxcclxuICBTY3JvbGxiYXJQb3NpdGlvbixcclxuICBTY3JvbGxiYXJWaXNpYmlsaXR5LFxyXG4gIE5nU2Nyb2xsYmFyU3RhdGUsXHJcbiAgU2Nyb2xsYmFyUG9pbnRlckV2ZW50c01ldGhvZFxyXG59IGZyb20gJy4vbmctc2Nyb2xsYmFyLm1vZGVsJztcclxuaW1wb3J0IHsgU2Nyb2xsYmFyTWFuYWdlciB9IGZyb20gJy4vdXRpbHMvc2Nyb2xsYmFyLW1hbmFnZXInO1xyXG5pbXBvcnQgeyBOYXRpdmVTY3JvbGxiYXJTaXplRmFjdG9yeSB9IGZyb20gJy4vdXRpbHMvbmF0aXZlLXNjcm9sbGJhci1zaXplLWZhY3RvcnknO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICduZy1zY3JvbGxiYXInLFxyXG4gIGV4cG9ydEFzOiAnbmdTY3JvbGxiYXInLFxyXG4gIHRlbXBsYXRlVXJsOiAnbmctc2Nyb2xsYmFyLmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWyduZy1zY3JvbGxiYXIuc2NzcycsICdzY3JvbGxiYXIvc2hhcmVkLnNjc3MnXSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcclxuICBob3N0OiB7ICdbY2xhc3Mubmctc2Nyb2xsYmFyXSc6ICd0cnVlJyB9XHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBOZ1Njcm9sbGJhciBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3Q2hlY2tlZCwgT25EZXN0cm95IHtcclxuICAvKiogQSBjbGFzcyBmb3J3YXJkZWQgdG8gc2Nyb2xsYWJsZSB2aWV3cG9ydCBlbGVtZW50ICovXHJcbiAgQElucHV0KCkgdmlld0NsYXNzOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy52aWV3Q2xhc3M7XHJcbiAgLyoqIEEgY2xhc3MgZm9yd2FyZGVkIHRvIHRoZSBzY3JvbGxiYXIgdHJhY2sgZWxlbWVudCAqL1xyXG4gIEBJbnB1dCgpIHRyYWNrQ2xhc3M6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRyYWNrQ2xhc3M7XHJcbiAgLyoqIEEgY2xhc3MgZm9yd2FyZGVkIHRvIHRoZSBzY3JvbGxiYXIgdGh1bWIgZWxlbWVudCAqL1xyXG4gIEBJbnB1dCgpIHRodW1iQ2xhc3M6IHN0cmluZyB8IHVuZGVmaW5lZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRodW1iQ2xhc3M7XHJcbiAgLyoqIE1pbmltdW0gc2Nyb2xsYmFyIHRodW1iIHNpemUgKi9cclxuICBASW5wdXQoKSBtaW5UaHVtYlNpemU6IG51bWJlciB8IHVuZGVmaW5lZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLm1pblRodW1iU2l6ZTtcclxuICAvKiogVGhlIGR1cmF0aW9uIHdoaWNoIHRoZSBzY3JvbGxpbmcgdGFrZXMgdG8gcmVhY2ggaXRzIHRhcmdldCB3aGVuIHNjcm9sbGJhciByYWlsIGlzIGNsaWNrZWQgKi9cclxuICBASW5wdXQoKSB0cmFja0NsaWNrU2Nyb2xsRHVyYXRpb246IG51bWJlciB8IHVuZGVmaW5lZCA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRyYWNrQ2xpY2tTY3JvbGxEdXJhdGlvbjtcclxuICAvKiogQSBmbGFnIHVzZWQgdG8gZW5hYmxlL2Rpc2FibGUgdGhlIHNjcm9sbGJhciB0aHVtYiBkcmFnZ2VkIGV2ZW50ICovXHJcbiAgQElucHV0KCkgcG9pbnRlckV2ZW50c0Rpc2FibGVkOiBib29sZWFuIHwgdW5kZWZpbmVkID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMucG9pbnRlckV2ZW50c0Rpc2FibGVkO1xyXG4gIC8qKlxyXG4gICAqIFNldHMgdGhlIHBvaW50ZXIgZXZlbnRzIG1ldGhvZFxyXG4gICAqIFVzZSB2aWV3cG9ydCBwb2ludGVyIGV2ZW50cyAgdG8gaGFuZGxlIGRyYWdnaW5nIGFuZCB0cmFjayBjbGljayAoVGhpcyBtYWtlcyBzY3JvbGxpbmcgd29yayB3aGVuIG1vdXNlIGlzIG92ZXIgdGhlIHNjcm9sbGJhcilcclxuICAgKiBVc2Ugc2Nyb2xsYmFyIHBvaW50ZXIgZXZlbnRzIHRvIGhhbmRsZSBkcmFnZ2luZyBhbmQgdHJhY2sgY2xpY2tcclxuICAgKi9cclxuICBASW5wdXQoKSBwb2ludGVyRXZlbnRzTWV0aG9kOiBTY3JvbGxiYXJQb2ludGVyRXZlbnRzTWV0aG9kID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMucG9pbnRlckV2ZW50c01ldGhvZDtcclxuICAvKiogRGlzYWJsZSBjdXN0b20gc2Nyb2xsYmFyIGFuZCBzd2l0Y2ggYmFjayB0byBuYXRpdmUgc2Nyb2xsYmFyICovXHJcbiAgQElucHV0KCkgZGlzYWJsZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAvKipcclxuICAgKiBTZXRzIHRoZSBzdXBwb3J0ZWQgc2Nyb2xsIHRyYWNrIG9mIHRoZSB2aWV3cG9ydCwgdGhlcmUgYXJlIDMgb3B0aW9uczpcclxuICAgKlxyXG4gICAqIC0gYHZlcnRpY2FsYCBVc2UgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY3JvbGxiYXJcclxuICAgKiAtIGBob3Jpem9udGFsYCBVc2UgYm90aCB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY3JvbGxiYXJcclxuICAgKiAtIGBhbGxgIFVzZSBib3RoIHZlcnRpY2FsIGFuZCBob3Jpem9udGFsIHNjcm9sbGJhclxyXG4gICAqL1xyXG4gIEBJbnB1dCgpIHRyYWNrOiBTY3JvbGxiYXJUcmFjayA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLnRyYWNrO1xyXG4gIC8qKlxyXG4gICAqIFdoZW4gdG8gc2hvdyB0aGUgc2Nyb2xsYmFyLCBhbmQgdGhlcmUgYXJlIDMgb3B0aW9uczpcclxuICAgKlxyXG4gICAqIC0gYG5hdGl2ZWAgKGRlZmF1bHQpIFNjcm9sbGJhciB3aWxsIGJlIHZpc2libGUgd2hlbiB2aWV3cG9ydCBpcyBzY3JvbGxhYmxlIGxpa2Ugd2l0aCBuYXRpdmUgc2Nyb2xsYmFyXHJcbiAgICogLSBgaG92ZXJgIFNjcm9sbGJhcnMgYXJlIGhpZGRlbiBieSBkZWZhdWx0LCBvbmx5IHZpc2libGUgb24gc2Nyb2xsaW5nIG9yIGhvdmVyaW5nXHJcbiAgICogLSBgYWx3YXlzYCBTY3JvbGxiYXJzIGFyZSBhbHdheXMgc2hvd24gZXZlbiBpZiB0aGUgdmlld3BvcnQgaXMgbm90IHNjcm9sbGFibGVcclxuICAgKi9cclxuICBASW5wdXQoKSB2aXNpYmlsaXR5OiBTY3JvbGxiYXJWaXNpYmlsaXR5ID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMudmlzaWJpbGl0eTtcclxuICAvKipcclxuICAgKiAgU2V0cyB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgc2Nyb2xsYmFyLCB0aGVyZSBhcmUgMiBvcHRpb25zOlxyXG4gICAqXHJcbiAgICogLSBgc3RhbmRhcmRgIChkZWZhdWx0KSBzY3JvbGxiYXIgc3BhY2Ugd2lsbCBiZSByZXNlcnZlZCBqdXN0IGxpa2Ugd2l0aCBuYXRpdmUgc2Nyb2xsYmFyLlxyXG4gICAqIC0gYGNvbXBhY3RgIHNjcm9sbGJhciBkb2Vzbid0IHJlc2VydmUgYW55IHNwYWNlLCB0aGV5IGFyZSBwbGFjZWQgb3ZlciB0aGUgdmlld3BvcnQuXHJcbiAgICovXHJcbiAgQElucHV0KCkgYXBwZWFyYW5jZTogU2Nyb2xsYmFyQXBwZWFyYW5jZSA9IHRoaXMubWFuYWdlci5nbG9iYWxPcHRpb25zLmFwcGVhcmFuY2U7XHJcbiAgLyoqXHJcbiAgICogU2V0cyB0aGUgcG9zaXRpb24gb2YgZWFjaCBzY3JvbGxiYXIsIHRoZXJlIGFyZSA0IG9wdGlvbnM6XHJcbiAgICpcclxuICAgKiAtIGBuYXRpdmVgIChEZWZhdWx0KSBVc2UgdGhlIGRlZmF1bHQgcG9zaXRpb24gbGlrZSBpbiBuYXRpdmUgc2Nyb2xsYmFyLlxyXG4gICAqIC0gYGludmVydFlgIEludmVydHMgdmVydGljYWwgc2Nyb2xsYmFyIHBvc2l0aW9uXHJcbiAgICogLSBgaW52ZXJ0WGAgSW52ZXJ0cyBIb3Jpem9udGFsIHNjcm9sbGJhciBwb3NpdGlvblxyXG4gICAqIC0gYGludmVydEFsbGAgSW52ZXJ0cyBib3RoIHNjcm9sbGJhciBwb3NpdGlvbnNcclxuICAgKi9cclxuICBASW5wdXQoKSBwb3NpdGlvbjogU2Nyb2xsYmFyUG9zaXRpb24gPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5wb3NpdGlvbjtcclxuICAvKiogRGVib3VuY2UgaW50ZXJ2YWwgZm9yIGRldGVjdGluZyBjaGFuZ2VzIHZpYSBSZXNpemVPYnNlcnZlciAqL1xyXG4gIEBJbnB1dCgpIHNlbnNvckRlYm91bmNlOiBudW1iZXIgfCB1bmRlZmluZWQgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5zZW5zb3JEZWJvdW5jZTtcclxuICAvKiogV2hldGhlciBSZXNpemVPYnNlcnZlciBpcyBkaXNhYmxlZCAqL1xyXG4gIEBJbnB1dCgpIHNlbnNvckRpc2FibGVkOiBib29sZWFuIHwgdW5kZWZpbmVkID0gdGhpcy5tYW5hZ2VyLmdsb2JhbE9wdGlvbnMuc2Vuc29yRGlzYWJsZWQ7XHJcbiAgLyoqIFNjcm9sbCBBdWRpdCBUaW1lICovXHJcbiAgQElucHV0KCkgc2Nyb2xsQXVkaXRUaW1lOiBudW1iZXIgfCB1bmRlZmluZWQgPSB0aGlzLm1hbmFnZXIuZ2xvYmFsT3B0aW9ucy5zY3JvbGxBdWRpdFRpbWU7XHJcbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgd2hlbiBzY3JvbGxiYXIgaXMgdXBkYXRlZCAqL1xyXG4gIEBPdXRwdXQoKSB1cGRhdGVkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG4gIC8qKiBEZWZhdWx0IHZpZXdwb3J0IHJlZmVyZW5jZSAqL1xyXG4gIEBWaWV3Q2hpbGQoU2Nyb2xsVmlld3BvcnQsIHsgc3RhdGljOiB0cnVlIH0pIHByaXZhdGUgZGVmYXVsdFZpZXdQb3J0OiBTY3JvbGxWaWV3cG9ydDtcclxuICAvKiogQ3VzdG9tIHZpZXdwb3J0IHJlZmVyZW5jZSAqL1xyXG4gIEBDb250ZW50Q2hpbGQoU2Nyb2xsVmlld3BvcnQsIHsgc3RhdGljOiB0cnVlIH0pIHByaXZhdGUgY3VzdG9tVmlld1BvcnQ6IFNjcm9sbFZpZXdwb3J0O1xyXG4gIC8qKiBWaWV3cG9ydCBFbGVtZW50ICovXHJcbiAgdmlld3BvcnQ6IFNjcm9sbFZpZXdwb3J0O1xyXG4gIC8qKiBTZXQgb2YgYXR0cmlidXRlcyBhZGRlZCBvbiB0aGUgc2Nyb2xsYmFyIHdyYXBwZXIgKi9cclxuICBzdGF0ZTogTmdTY3JvbGxiYXJTdGF0ZSA9IHt9O1xyXG4gIC8qKiBTdHJlYW0gdGhhdCBkZXN0cm95cyBjb21wb25lbnRzJyBvYnNlcnZhYmxlcyAqL1xyXG4gIHByaXZhdGUgZGVzdHJveWVkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcclxuXHJcbiAgLyoqIFN0cmVhbSB0aGF0IGVtaXRzIG9uIHNjcm9sbCBldmVudCAqL1xyXG4gIHNjcm9sbGVkOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgc2Nyb2xsIGV2ZW50IGZvciB2ZXJ0aWNhbCBzY3JvbGxiYXIgKi9cclxuICB2ZXJ0aWNhbFNjcm9sbGVkOiBPYnNlcnZhYmxlPGFueT47XHJcbiAgLyoqIFN0ZWFtIHRoYXQgZW1pdHMgc2Nyb2xsIGV2ZW50IGZvciBob3Jpem9udGFsIHNjcm9sbGJhciAqL1xyXG4gIGhvcml6b250YWxTY3JvbGxlZDogT2JzZXJ2YWJsZTxhbnk+O1xyXG5cclxuICBnZXQgbmF0aXZlRWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICByZXR1cm4gdGhpcy5lbC5uYXRpdmVFbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICBwcml2YXRlIGVsOiBFbGVtZW50UmVmLFxyXG4gICAgcHJpdmF0ZSB6b25lOiBOZ1pvbmUsXHJcbiAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZixcclxuICAgIHByaXZhdGUgZGlyOiBEaXJlY3Rpb25hbGl0eSxcclxuICAgIHByaXZhdGUgc21vb3RoU2Nyb2xsOiBTbW9vdGhTY3JvbGxNYW5hZ2VyLFxyXG4gICAgcHVibGljIG1hbmFnZXI6IFNjcm9sbGJhck1hbmFnZXIsXHJcbiAgICBwdWJsaWMgbmF0aXZlU2Nyb2xsYmFyU2l6ZUZhY3Rvcnk6IE5hdGl2ZVNjcm9sbGJhclNpemVGYWN0b3J5KSB7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgbG9jYWwgc3RhdGUgd2l0aCBlYWNoIGNoYW5nZSBkZXRlY3Rpb25cclxuICAgKi9cclxuICBwcml2YXRlIHVwZGF0ZVN0YXRlKCkge1xyXG4gICAgbGV0IHZlcnRpY2FsVXNlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgbGV0IGhvcml6b250YWxVc2VkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICBsZXQgaXNWZXJ0aWNhbGx5U2Nyb2xsYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgbGV0IGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHZlcnRpY2FsIHNjcm9sbGJhciBzaG91bGQgYmUgZGlzcGxheWVkXHJcbiAgICBpZiAodGhpcy50cmFjayA9PT0gJ2FsbCcgfHwgdGhpcy50cmFjayA9PT0gJ3ZlcnRpY2FsJykge1xyXG4gICAgICBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlID0gdGhpcy52aWV3cG9ydC5zY3JvbGxIZWlnaHQgPiB0aGlzLnZpZXdwb3J0LmNsaWVudEhlaWdodDtcclxuICAgICAgdmVydGljYWxVc2VkID0gdGhpcy52aXNpYmlsaXR5ID09PSAnYWx3YXlzJyB8fCBpc1ZlcnRpY2FsbHlTY3JvbGxhYmxlO1xyXG4gICAgfVxyXG4gICAgLy8gQ2hlY2sgaWYgaG9yaXpvbnRhbCBzY3JvbGxiYXIgc2hvdWxkIGJlIGRpc3BsYXllZFxyXG4gICAgaWYgKHRoaXMudHJhY2sgPT09ICdhbGwnIHx8IHRoaXMudHJhY2sgPT09ICdob3Jpem9udGFsJykge1xyXG4gICAgICBpc0hvcml6b250YWxseVNjcm9sbGFibGUgPSB0aGlzLnZpZXdwb3J0LnNjcm9sbFdpZHRoID4gdGhpcy52aWV3cG9ydC5jbGllbnRXaWR0aDtcclxuICAgICAgaG9yaXpvbnRhbFVzZWQgPSB0aGlzLnZpc2liaWxpdHkgPT09ICdhbHdheXMnIHx8IGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBVcGRhdGUgaW5uZXIgd3JhcHBlciBhdHRyaWJ1dGVzXHJcbiAgICB0aGlzLl91cGRhdGVTdGF0ZSh7XHJcbiAgICAgIHBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLFxyXG4gICAgICB0cmFjazogdGhpcy50cmFjayxcclxuICAgICAgYXBwZWFyYW5jZTogdGhpcy5hcHBlYXJhbmNlLFxyXG4gICAgICB2aXNpYmlsaXR5OiB0aGlzLnZpc2liaWxpdHksXHJcbiAgICAgIGRlYWN0aXZhdGVkOiB0aGlzLmRpc2FibGVkLFxyXG4gICAgICBkaXI6IHRoaXMuZGlyLnZhbHVlLFxyXG4gICAgICBwb2ludGVyRXZlbnRzTWV0aG9kOiB0aGlzLnBvaW50ZXJFdmVudHNNZXRob2QsXHJcbiAgICAgIHZlcnRpY2FsVXNlZCxcclxuICAgICAgaG9yaXpvbnRhbFVzZWQsXHJcbiAgICAgIGlzVmVydGljYWxseVNjcm9sbGFibGUsXHJcbiAgICAgIGlzSG9yaXpvbnRhbGx5U2Nyb2xsYWJsZVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIF91cGRhdGVTdGF0ZShzdGF0ZTogTmdTY3JvbGxiYXJTdGF0ZSkge1xyXG4gICAgdGhpcy5zdGF0ZSA9IHsgLi4udGhpcy5zdGF0ZSwgLi4uc3RhdGUgfTtcclxuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRTY3JvbGxlZEJ5RGlyZWN0aW9uKHByb3BlcnR5OiAnc2Nyb2xsTGVmdCcgfCAnc2Nyb2xsVG9wJykge1xyXG4gICAgbGV0IGV2ZW50OiBhbnk7XHJcbiAgICByZXR1cm4gdGhpcy5zY3JvbGxlZC5waXBlKFxyXG4gICAgICB0YXAoKGU6IGFueSkgPT4gZXZlbnQgPSBlKSxcclxuICAgICAgcGx1Y2soJ3RhcmdldCcsIHByb3BlcnR5KSxcclxuICAgICAgcGFpcndpc2UoKSxcclxuICAgICAgZmlsdGVyKChbcHJldiwgY3Vycl0pID0+IHByZXYgIT09IGN1cnIpLFxyXG4gICAgICBtYXAoKCkgPT4gZXZlbnQpXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IGhvdmVyZWQgc3RhdGUgaWYgYSBzY3JvbGxiYXIgaXMgYmVpbmcgaG92ZXJlZFxyXG4gICAqL1xyXG4gIHNldEhvdmVyZWQoaG92ZXJlZDogU2Nyb2xsYmFySG92ZXJlZCkge1xyXG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLl91cGRhdGVTdGF0ZSh7IC4uLmhvdmVyZWQgfSkpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IGRyYWdnaW5nIHN0YXRlIGlmIGEgc2Nyb2xsYmFyIGlzIGJlaW5nIGRyYWdnZWRcclxuICAgKi9cclxuICBzZXREcmFnZ2luZyhkcmFnZ2luZzogU2Nyb2xsYmFyRHJhZ2dpbmcpIHtcclxuICAgIHRoaXMuem9uZS5ydW4oKCkgPT4gdGhpcy5fdXBkYXRlU3RhdGUoeyAuLi5kcmFnZ2luZyB9KSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBTZXQgY2xpY2tlZCBzdGF0ZSBpZiBhIHNjcm9sbGJhciB0cmFjayBpcyBiZWluZyBjbGlja1xyXG4gICAqL1xyXG4gIHNldENsaWNrZWQoc2Nyb2xsYmFyQ2xpY2tlZDogYm9vbGVhbikge1xyXG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLl91cGRhdGVTdGF0ZSh7IHNjcm9sbGJhckNsaWNrZWQgfSkpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICAvLyBTZXQgdGhlIHZpZXdwb3J0IGJhc2VkIG9uIHVzZXIgY2hvaWNlXHJcbiAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5jdXN0b21WaWV3UG9ydCkge1xyXG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLmN1c3RvbVZpZXdQb3J0O1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdFZpZXdQb3J0LnNldEFzV3JhcHBlcigpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudmlld3BvcnQgPSB0aGlzLmRlZmF1bHRWaWV3UG9ydDtcclxuICAgICAgfVxyXG4gICAgICAvLyBBY3RpdmF0ZSB0aGUgc2VsZWN0ZWQgdmlld3BvcnRcclxuICAgICAgdGhpcy52aWV3cG9ydC5zZXRBc1ZpZXdwb3J0KHRoaXMudmlld0NsYXNzISk7XHJcblxyXG4gICAgICBsZXQgc2Nyb2xsU3RyZWFtID0gZnJvbUV2ZW50KHRoaXMudmlld3BvcnQubmF0aXZlRWxlbWVudCwgJ3Njcm9sbCcsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcclxuICAgICAgLy8gVGhyb3R0bGUgc2Nyb2xsIGV2ZW50IGlmICdzY3JvbGxBdWRpdFRpbWUnIGlzIHNldFxyXG4gICAgICBzY3JvbGxTdHJlYW0gPSB0aGlzLnNjcm9sbEF1ZGl0VGltZSA/IHNjcm9sbFN0cmVhbS5waXBlKGF1ZGl0VGltZSh0aGlzLnNjcm9sbEF1ZGl0VGltZSkpIDogc2Nyb2xsU3RyZWFtO1xyXG4gICAgICAvLyBJbml0aWFsaXplIHNjcm9sbCBzdHJlYW1zXHJcbiAgICAgIHRoaXMuc2Nyb2xsZWQgPSBuZXcgT2JzZXJ2YWJsZSgob2JzZXJ2ZXI6IE9ic2VydmVyPGFueT4pID0+XHJcbiAgICAgICAgc2Nyb2xsU3RyZWFtLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveWVkKSkuc3Vic2NyaWJlKG9ic2VydmVyKVxyXG4gICAgICApO1xyXG4gICAgICB0aGlzLnZlcnRpY2FsU2Nyb2xsZWQgPSB0aGlzLmdldFNjcm9sbGVkQnlEaXJlY3Rpb24oJ3Njcm9sbFRvcCcpO1xyXG4gICAgICB0aGlzLmhvcml6b250YWxTY3JvbGxlZCA9IHRoaXMuZ2V0U2Nyb2xsZWRCeURpcmVjdGlvbignc2Nyb2xsTGVmdCcpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0NoZWNrZWQoKSB7XHJcbiAgICB0aGlzLnVwZGF0ZVN0YXRlKCk7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIHRoaXMuZGVzdHJveWVkLm5leHQoKTtcclxuICAgIHRoaXMuZGVzdHJveWVkLmNvbXBsZXRlKCk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBVcGRhdGUgbG9jYWwgc3RhdGUgYW5kIHRoZSBpbnRlcm5hbCBzY3JvbGxiYXIgY29udHJvbHNcclxuICAgKi9cclxuICB1cGRhdGUoKSB7XHJcbiAgICBpZiAoIXRoaXMuc3RhdGUuaG9yaXpvbnRhbFVzZWQpIHtcclxuICAgICAgLy8gQXV0by1oZWlnaHQ6IFNldCBjb21wb25lbnQgaGVpZ2h0IHRvIGNvbnRlbnQgaGVpZ2h0XHJcbiAgICAgIHRoaXMubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLnZpZXdwb3J0LmNvbnRlbnRIZWlnaHR9cHhgO1xyXG4gICAgfVxyXG4gICAgdGhpcy51cGRhdGVkLm5leHQoKTtcclxuICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU21vb3RoIHNjcm9sbCBmdW5jdGlvbnNcclxuICAgKi9cclxuICBzY3JvbGxUbyhvcHRpb25zOiBTbW9vdGhTY3JvbGxUb09wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNtb290aFNjcm9sbC5zY3JvbGxUbyh0aGlzLnZpZXdwb3J0Lm5hdGl2ZUVsZW1lbnQsIG9wdGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU2Nyb2xsIHRvIGVsZW1lbnQgYnkgcmVmZXJlbmNlIG9yIHNlbGVjdG9yXHJcbiAgICovXHJcbiAgc2Nyb2xsVG9FbGVtZW50KHRhcmdldDogU21vb3RoU2Nyb2xsRWxlbWVudCwgb3B0aW9ucz8pOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHJldHVybiB0aGlzLnNtb290aFNjcm9sbC5zY3JvbGxUb0VsZW1lbnQodGhpcy52aWV3cG9ydC5uYXRpdmVFbGVtZW50LCB0YXJnZXQsIG9wdGlvbnMpO1xyXG4gIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIFNjcm9sbGJhckRyYWdnaW5nIHtcclxuICB2ZXJ0aWNhbERyYWdnaW5nPzogYm9vbGVhbjtcclxuICBob3Jpem9udGFsRHJhZ2dpbmc/OiBib29sZWFuO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgU2Nyb2xsYmFySG92ZXJlZCB7XHJcbiAgdmVydGljYWxIb3ZlcmVkPzogYm9vbGVhbjtcclxuICBob3Jpem9udGFsSG92ZXJlZD86IGJvb2xlYW47XHJcbn1cclxuIl19