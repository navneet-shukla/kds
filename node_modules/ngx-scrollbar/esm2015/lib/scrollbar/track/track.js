/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { coerceNumberProperty } from '@angular/cdk/coercion';
import { EMPTY, fromEvent, merge, of } from 'rxjs';
import { map, pluck, switchMap, tap } from 'rxjs/operators';
import { preventSelection, enableSelection, stopPropagation } from '../common';
/**
 * @abstract
 */
export class TrackAdapter {
    /**
     * @protected
     * @param {?} cmp
     * @param {?} trackElement
     * @param {?} document
     */
    constructor(cmp, trackElement, document) {
        this.cmp = cmp;
        this.trackElement = trackElement;
        this.document = document;
    }
    // Stream that emits when the track element is clicked
    /**
     * @return {?}
     */
    get clicked() {
        /** @type {?} */
        const mouseDown = fromEvent(this.trackElement, 'mousedown', { passive: true }).pipe(stopPropagation(), preventSelection(this.document));
        /** @type {?} */
        const mouseup = fromEvent(this.document, 'mouseup', { passive: true }).pipe(stopPropagation(), enableSelection(this.document), switchMap((/**
         * @return {?}
         */
        () => EMPTY)));
        return merge(mouseDown, mouseup);
    }
    // Stream that emits when the track element is hovered
    /**
     * @return {?}
     */
    get hovered() {
        /** @type {?} */
        const mouseEnter = fromEvent(this.trackElement, 'mouseenter', { passive: true }).pipe(stopPropagation(), map((/**
         * @return {?}
         */
        () => true)));
        /** @type {?} */
        const mouseLeave = fromEvent(this.trackElement, 'mouseleave', { passive: true }).pipe(stopPropagation(), map((/**
         * @return {?}
         */
        () => false)));
        return merge(mouseEnter, mouseLeave);
    }
    // Get track client rect
    /**
     * @return {?}
     */
    get clientRect() {
        return this.trackElement.getBoundingClientRect();
    }
    /**
     * Stream that emits when scrollbar track is clicked
     * @param {?} e
     * @param {?} thumbSize
     * @param {?} scrollSize
     * @return {?}
     */
    onTrackClicked(e, thumbSize, scrollSize) {
        return of(e).pipe(pluck(this.pageProperty), 
        // Calculate scrollTo position
        map((/**
         * @param {?} pageOffset
         * @return {?}
         */
        (pageOffset) => {
            /** @type {?} */
            const clickOffset = pageOffset - this.offset;
            /** @type {?} */
            const offset = clickOffset - (thumbSize / 2);
            /** @type {?} */
            const ratio = offset / this.size;
            return ratio * scrollSize;
        })), 
        // Smooth scroll to position
        tap((/**
         * @param {?} value
         * @return {?}
         */
        (value) => {
            this.cmp.scrollTo(Object.assign({}, this.mapToScrollToOption(value), { duration: coerceNumberProperty(this.cmp.trackClickScrollDuration) }));
        })));
    }
}
if (false) {
    /**
     * @type {?}
     * @protected
     */
    TrackAdapter.prototype.cmp;
    /**
     * @type {?}
     * @protected
     */
    TrackAdapter.prototype.trackElement;
    /**
     * @type {?}
     * @protected
     */
    TrackAdapter.prototype.document;
    /**
     * @abstract
     * @return {?}
     */
    TrackAdapter.prototype.pageProperty = function () { };
    /**
     * @abstract
     * @return {?}
     */
    TrackAdapter.prototype.size = function () { };
    /**
     * @abstract
     * @return {?}
     */
    TrackAdapter.prototype.offset = function () { };
    /**
     * @abstract
     * @protected
     * @param {?} value
     * @return {?}
     */
    TrackAdapter.prototype.mapToScrollToOption = function (value) { };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhY2suanMiLCJzb3VyY2VSb290Ijoibmc6Ly9uZ3gtc2Nyb2xsYmFyLyIsInNvdXJjZXMiOlsibGliL3Njcm9sbGJhci90cmFjay90cmFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDN0QsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFjLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvRCxPQUFPLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDNUQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsTUFBTSxXQUFXLENBQUM7Ozs7QUFHL0UsTUFBTSxPQUFnQixZQUFZOzs7Ozs7O0lBMkNoQyxZQUFnQyxHQUFnQixFQUNoQixZQUF5QixFQUN6QixRQUFhO1FBRmIsUUFBRyxHQUFILEdBQUcsQ0FBYTtRQUNoQixpQkFBWSxHQUFaLFlBQVksQ0FBYTtRQUN6QixhQUFRLEdBQVIsUUFBUSxDQUFLO0lBQzdDLENBQUM7Ozs7O0lBM0NELElBQUksT0FBTzs7Y0FDSCxTQUFTLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsV0FBVyxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUNqRixlQUFlLEVBQUUsRUFDakIsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUNoQzs7Y0FDSyxPQUFPLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsSUFBSSxDQUN6RSxlQUFlLEVBQUUsRUFDakIsZUFBZSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsRUFDOUIsU0FBUzs7O1FBQUMsR0FBRyxFQUFFLENBQUMsS0FBSyxFQUFDLENBQ3ZCO1FBQ0QsT0FBTyxLQUFLLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ25DLENBQUM7Ozs7O0lBR0QsSUFBSSxPQUFPOztjQUNILFVBQVUsR0FBRyxTQUFTLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxZQUFZLEVBQUUsRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQ25GLGVBQWUsRUFBRSxFQUNqQixHQUFHOzs7UUFBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUMsQ0FDaEI7O2NBQ0ssVUFBVSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLFlBQVksRUFBRSxFQUFFLE9BQU8sRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FDbkYsZUFBZSxFQUFFLEVBQ2pCLEdBQUc7OztRQUFDLEdBQUcsRUFBRSxDQUFDLEtBQUssRUFBQyxDQUNqQjtRQUNELE9BQU8sS0FBSyxDQUFDLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztJQUN2QyxDQUFDOzs7OztJQVlELElBQUksVUFBVTtRQUNaLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsRUFBRSxDQUFDO0lBQ25ELENBQUM7Ozs7Ozs7O0lBVUQsY0FBYyxDQUFDLENBQU0sRUFBRSxTQUFpQixFQUFFLFVBQWtCO1FBQzFELE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FDZixLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztRQUN4Qiw4QkFBOEI7UUFDOUIsR0FBRzs7OztRQUFDLENBQUMsVUFBa0IsRUFBRSxFQUFFOztrQkFDbkIsV0FBVyxHQUFHLFVBQVUsR0FBRyxJQUFJLENBQUMsTUFBTTs7a0JBQ3RDLE1BQU0sR0FBRyxXQUFXLEdBQUcsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDOztrQkFDdEMsS0FBSyxHQUFHLE1BQU0sR0FBRyxJQUFJLENBQUMsSUFBSTtZQUNoQyxPQUFPLEtBQUssR0FBRyxVQUFVLENBQUM7UUFDNUIsQ0FBQyxFQUFDO1FBQ0YsNEJBQTRCO1FBQzVCLEdBQUc7Ozs7UUFBQyxDQUFDLEtBQWEsRUFBRSxFQUFFO1lBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxtQkFDWixJQUFJLENBQUMsbUJBQW1CLENBQUMsS0FBSyxDQUFDLElBQ2xDLFFBQVEsRUFBRSxvQkFBb0IsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDLElBQ2pFLENBQUM7UUFDTCxDQUFDLEVBQUMsQ0FDSCxDQUFDO0lBQ0osQ0FBQztDQUdGOzs7Ozs7SUE3QnVCLDJCQUEwQjs7Ozs7SUFDMUIsb0NBQW1DOzs7OztJQUNuQyxnQ0FBdUI7Ozs7O0lBZjdDLHNEQUFvQzs7Ozs7SUFHcEMsOENBQTRCOzs7OztJQUc1QixnREFBOEI7Ozs7Ozs7SUFtQzlCLGtFQUF1RSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvZXJjZU51bWJlclByb3BlcnR5IH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcclxuaW1wb3J0IHsgRU1QVFksIGZyb21FdmVudCwgbWVyZ2UsIE9ic2VydmFibGUsIG9mIH0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7IG1hcCwgcGx1Y2ssIHN3aXRjaE1hcCwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xyXG5pbXBvcnQgeyBwcmV2ZW50U2VsZWN0aW9uLCBlbmFibGVTZWxlY3Rpb24sIHN0b3BQcm9wYWdhdGlvbiB9IGZyb20gJy4uL2NvbW1vbic7XHJcbmltcG9ydCB7IE5nU2Nyb2xsYmFyIH0gZnJvbSAnLi4vLi4vbmctc2Nyb2xsYmFyJztcclxuXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBUcmFja0FkYXB0ZXIge1xyXG5cclxuICAvLyBTdHJlYW0gdGhhdCBlbWl0cyB3aGVuIHRoZSB0cmFjayBlbGVtZW50IGlzIGNsaWNrZWRcclxuICBnZXQgY2xpY2tlZCgpOiBPYnNlcnZhYmxlPGFueT4ge1xyXG4gICAgY29uc3QgbW91c2VEb3duID0gZnJvbUV2ZW50KHRoaXMudHJhY2tFbGVtZW50LCAnbW91c2Vkb3duJywgeyBwYXNzaXZlOiB0cnVlIH0pLnBpcGUoXHJcbiAgICAgIHN0b3BQcm9wYWdhdGlvbigpLFxyXG4gICAgICBwcmV2ZW50U2VsZWN0aW9uKHRoaXMuZG9jdW1lbnQpXHJcbiAgICApO1xyXG4gICAgY29uc3QgbW91c2V1cCA9IGZyb21FdmVudCh0aGlzLmRvY3VtZW50LCAnbW91c2V1cCcsIHsgcGFzc2l2ZTogdHJ1ZSB9KS5waXBlKFxyXG4gICAgICBzdG9wUHJvcGFnYXRpb24oKSxcclxuICAgICAgZW5hYmxlU2VsZWN0aW9uKHRoaXMuZG9jdW1lbnQpLFxyXG4gICAgICBzd2l0Y2hNYXAoKCkgPT4gRU1QVFkpXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIG1lcmdlKG1vdXNlRG93biwgbW91c2V1cCk7XHJcbiAgfVxyXG5cclxuICAvLyBTdHJlYW0gdGhhdCBlbWl0cyB3aGVuIHRoZSB0cmFjayBlbGVtZW50IGlzIGhvdmVyZWRcclxuICBnZXQgaG92ZXJlZCgpOiBPYnNlcnZhYmxlPGJvb2xlYW4+IHtcclxuICAgIGNvbnN0IG1vdXNlRW50ZXIgPSBmcm9tRXZlbnQodGhpcy50cmFja0VsZW1lbnQsICdtb3VzZWVudGVyJywgeyBwYXNzaXZlOiB0cnVlIH0pLnBpcGUoXHJcbiAgICAgIHN0b3BQcm9wYWdhdGlvbigpLFxyXG4gICAgICBtYXAoKCkgPT4gdHJ1ZSlcclxuICAgICk7XHJcbiAgICBjb25zdCBtb3VzZUxlYXZlID0gZnJvbUV2ZW50KHRoaXMudHJhY2tFbGVtZW50LCAnbW91c2VsZWF2ZScsIHsgcGFzc2l2ZTogdHJ1ZSB9KS5waXBlKFxyXG4gICAgICBzdG9wUHJvcGFnYXRpb24oKSxcclxuICAgICAgbWFwKCgpID0+IGZhbHNlKVxyXG4gICAgKTtcclxuICAgIHJldHVybiBtZXJnZShtb3VzZUVudGVyLCBtb3VzZUxlYXZlKTtcclxuICB9XHJcblxyXG4gIC8vIFJldHVybnMgZWl0aGVyICdwYWdlWCcgb3IgJ3BhZ2VZJyBhY2NvcmRpbmcgdG8gc2Nyb2xsYmFyIGF4aXNcclxuICBhYnN0cmFjdCBnZXQgcGFnZVByb3BlcnR5KCk6IHN0cmluZztcclxuXHJcbiAgLy8gUmV0dXJucyB0aGUgdHJhY2sgc2l6ZSwgY2xpZW50SGVpZ2h0IG9yIGNsaWVudFdpZHRoXHJcbiAgYWJzdHJhY3QgZ2V0IHNpemUoKTogbnVtYmVyO1xyXG5cclxuICAvLyBSZXR1cm5zIHRoZSBzdGFydCBvZmZzZXQgZWl0aGVyICdjbGllbnRSZWN0LnRvcCcgb3IgJ2NsaWVudFJlY3QubGVmdCdcclxuICBhYnN0cmFjdCBnZXQgb2Zmc2V0KCk6IG51bWJlcjtcclxuXHJcbiAgLy8gR2V0IHRyYWNrIGNsaWVudCByZWN0XHJcbiAgZ2V0IGNsaWVudFJlY3QoKTogQ2xpZW50UmVjdCB7XHJcbiAgICByZXR1cm4gdGhpcy50cmFja0VsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgY29uc3RydWN0b3IocHJvdGVjdGVkIGNtcDogTmdTY3JvbGxiYXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3RlY3RlZCB0cmFja0VsZW1lbnQ6IEhUTUxFbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm90ZWN0ZWQgZG9jdW1lbnQ6IGFueSkge1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogU3RyZWFtIHRoYXQgZW1pdHMgd2hlbiBzY3JvbGxiYXIgdHJhY2sgaXMgY2xpY2tlZFxyXG4gICAqL1xyXG4gIG9uVHJhY2tDbGlja2VkKGU6IGFueSwgdGh1bWJTaXplOiBudW1iZXIsIHNjcm9sbFNpemU6IG51bWJlcik6IE9ic2VydmFibGU8YW55PiB7XHJcbiAgICByZXR1cm4gb2YoZSkucGlwZShcclxuICAgICAgcGx1Y2sodGhpcy5wYWdlUHJvcGVydHkpLFxyXG4gICAgICAvLyBDYWxjdWxhdGUgc2Nyb2xsVG8gcG9zaXRpb25cclxuICAgICAgbWFwKChwYWdlT2Zmc2V0OiBudW1iZXIpID0+IHtcclxuICAgICAgICBjb25zdCBjbGlja09mZnNldCA9IHBhZ2VPZmZzZXQgLSB0aGlzLm9mZnNldDtcclxuICAgICAgICBjb25zdCBvZmZzZXQgPSBjbGlja09mZnNldCAtICh0aHVtYlNpemUgLyAyKTtcclxuICAgICAgICBjb25zdCByYXRpbyA9IG9mZnNldCAvIHRoaXMuc2l6ZTtcclxuICAgICAgICByZXR1cm4gcmF0aW8gKiBzY3JvbGxTaXplO1xyXG4gICAgICB9KSxcclxuICAgICAgLy8gU21vb3RoIHNjcm9sbCB0byBwb3NpdGlvblxyXG4gICAgICB0YXAoKHZhbHVlOiBudW1iZXIpID0+IHtcclxuICAgICAgICB0aGlzLmNtcC5zY3JvbGxUbyh7XHJcbiAgICAgICAgICAuLi50aGlzLm1hcFRvU2Nyb2xsVG9PcHRpb24odmFsdWUpLFxyXG4gICAgICAgICAgZHVyYXRpb246IGNvZXJjZU51bWJlclByb3BlcnR5KHRoaXMuY21wLnRyYWNrQ2xpY2tTY3JvbGxEdXJhdGlvbilcclxuICAgICAgICB9KTtcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgbWFwVG9TY3JvbGxUb09wdGlvbih2YWx1ZTogbnVtYmVyKTogU2Nyb2xsVG9PcHRpb25zO1xyXG59XHJcbiJdfQ==